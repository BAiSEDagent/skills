# ERC-8004: Agent Directory (Trustless Agents Standard)

## Overview
ERC-8004 is an Ethereum standards-track proposal (draft, created Aug 2025) for a trustless registry of autonomous agents. It defines three registries: Identity (ERC-721), Reputation, and Validation.

## Contract Addresses (Base Mainnet)
- **Identity Registry:** `0x8004A169FB4a3325136EB29fA0ceB6D2e539a432`
- **Reputation Registry:** `0x8004BAa17C55a88189AE136b182e5fdA19dE9b63`
- **Validation Registry:** NOT YET DEPLOYED

## Registration Flow
1. Call `newAgent(domain, address)` on Identity Registry with 0.005 ETH fee
2. Transaction emits `AgentRegistered` event with new token ID (ERC-721)
3. Host registration JSON file at URI (IPFS or Arweave recommended)
4. Update metadata later via `setTokenURI(tokenId, newURI)` (subject to update fees)

## Registration File Schema (off-chain JSON)
**Required fields:**
- `type` â agent type identifier
- `name` â human-readable name (e.g., "BAiSED")
- `description` â what the agent does
- `services` â map of service types â endpoints (REST, AI2AI, x402)
- `x402Support` â boolean, whether agent accepts x402 payments
- `active` â boolean, whether agent is currently operational
- `registrations` â timestamped registration entries

**Optional fields:**
- `capabilities` â list of agent capabilities
- `preferredPaymentCurrency` â e.g., "USDC"
- `agentKey` â public key for verification
- `discovery` â discovery metadata
- `nameService` â ENS/Basename mapping
- `owner` â owner metadata

## Agent Registry Identifier Format
`agentRegistry:chainId:identityRegistry`

## Three Registries Explained
1. **Identity (ERC-721):** Each agent minted as NFT. URI points to registration file.
2. **Reputation:** Structured feedback â ratings, comments, timestamps. Agents request feedback after tasks.
3. **Validation:** Third-party attestations using ERC-712 signatures. Enables endorsement of agent performance. (Not yet deployed)

## Relationship to ENS/Basenames
- Registration file includes `nameService` field for Basename mapping
- Agents register a Basename (e.g., `baised.base.eth`) and map it to ERC-8004 token ID
- Enables reverse lookups: Basename â agent identity â capabilities

## Reference Implementation
- Repository: `erc-8004-example` on GitHub
- Includes: deploy scripts, agent registration, reputation feedback, validation
- Language: Python (web3.py)

## BAiSED Registration Plan
1. Register in Identity Registry (0.005 ETH)
2. Host registration JSON on IPFS with capabilities, x402 endpoints, Basename mapping
3. Set `x402Support: true`, list service endpoints
4. Collect reputation entries to build credibility
5. Monitor spec for Validation Registry deployment